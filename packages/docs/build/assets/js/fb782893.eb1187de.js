"use strict";(self.webpackChunknext_auth_docs=self.webpackChunknext_auth_docs||[]).push([[7957],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return m}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),d=p(n),m=r,h=d["".concat(l,".").concat(m)]||d[m]||c[m]||i;return n?a.createElement(h,o(o({ref:t},u),{},{components:n})):a.createElement(h,o({ref:t},u))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var p=2;p<i;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},9513:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return p},toc:function(){return u},default:function(){return d}});var a=n(7462),r=n(3366),i=(n(7294),n(3905)),o=["components"],s={id:"pages",title:"Pages"},l=void 0,p={unversionedId:"configuration/pages",id:"configuration/pages",isDocsHomePage:!1,title:"Pages",description:"NextAuth.js automatically creates simple, unbranded authentication pages for handling Sign in, Sign out, Email Verification and displaying error messages.",source:"@site/docs/configuration/pages.md",sourceDirName:"configuration",slug:"/configuration/pages",permalink:"/configuration/pages",editUrl:"https://github.com/nextauthjs/docs/edit/main/docs/configuration/pages.md",tags:[],version:"current",lastUpdatedBy:"Bal\xe1zs Orb\xe1n",lastUpdatedAt:1643984969,formattedLastUpdatedAt:"2/4/2022",frontMatter:{id:"pages",title:"Pages"},sidebar:"docs",previous:{title:"Databases",permalink:"/configuration/databases"},next:{title:"Callbacks",permalink:"/configuration/callbacks"}},u=[{value:"Error codes",id:"error-codes",children:[{value:"Error page",id:"error-page",children:[],level:3},{value:"Sign-in page",id:"sign-in-page",children:[],level:3}],level:2},{value:"Theming",id:"theming",children:[{value:"Sign In",id:"sign-in",children:[],level:4},{value:"Sign Out",id:"sign-out",children:[],level:4}],level:2},{value:"Examples",id:"examples",children:[{value:"OAuth Sign in",id:"oauth-sign-in",children:[],level:3},{value:"Email Sign in",id:"email-sign-in",children:[],level:3},{value:"Credentials Sign in",id:"credentials-sign-in",children:[],level:3}],level:2}],c={toc:u};function d(e){var t=e.components,s=(0,r.Z)(e,o);return(0,i.kt)("wrapper",(0,a.Z)({},c,s,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"NextAuth.js automatically creates simple, unbranded authentication pages for handling Sign in, Sign out, Email Verification and displaying error messages."),(0,i.kt)("p",null,"The options displayed on the sign-up page are automatically generated based on the providers specified in the options passed to NextAuth.js."),(0,i.kt)("p",null,"To add a custom login page, you can use the ",(0,i.kt)("inlineCode",{parentName:"p"},"pages")," option:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript",metastring:'title="pages/api/auth/[...nextauth].js"',title:'"pages/api/auth/[...nextauth].js"'},"...\n  pages: {\n    signIn: '/auth/signin',\n    signOut: '/auth/signout',\n    error: '/auth/error', // Error code passed in query string as ?error=\n    verifyRequest: '/auth/verify-request', // (used for check email message)\n    newUser: '/auth/new-user' // New users will be directed here on first sign in (leave the property out if not of interest)\n  }\n...\n")),(0,i.kt)("h2",{id:"error-codes"},"Error codes"),(0,i.kt)("p",null,"We purposefully restrict the returned error codes for increased security."),(0,i.kt)("h3",{id:"error-page"},"Error page"),(0,i.kt)("p",null,"The following errors are passed as error query parameters to the default or overridden error page:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Configuration"),": There is a problem with the server configuration. Check if your ",(0,i.kt)("a",{parentName:"li",href:"/configuration/options#options"},"options")," are correct."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"AccessDenied"),": Usually occurs, when you restricted access through the ",(0,i.kt)("a",{parentName:"li",href:"/configuration/callbacks#sign-in-callback"},(0,i.kt)("inlineCode",{parentName:"a"},"signIn")," callback"),", or ",(0,i.kt)("a",{parentName:"li",href:"/configuration/callbacks#redirect-callback"},(0,i.kt)("inlineCode",{parentName:"a"},"redirect")," callback")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Verification"),": Related to the Email provider. The token has expired or has already been used"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Default"),": Catch all, will apply, if none of the above matched")),(0,i.kt)("p",null,"Example: ",(0,i.kt)("inlineCode",{parentName:"p"},"/auth/error?error=Configuration")),(0,i.kt)("h3",{id:"sign-in-page"},"Sign-in page"),(0,i.kt)("p",null,"The following errors are passed as error query parameters to the default or overridden sign-in page:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"OAuthSignin"),": Error in constructing an authorization URL (",(0,i.kt)("a",{parentName:"li",href:"https://github.com/nextauthjs/next-auth/blob/457952bb5abf08b09861b0e5da403080cd5525be/src/server/lib/signin/oauth.js"},"1"),", ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/nextauthjs/next-auth/blob/main/packages/next-auth/src/core/lib/oauth/pkce-handler.ts"},"2"),", ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/nextauthjs/next-auth/blob/main/packages/next-auth/src/core/lib/oauth/state-handler.ts"},"3"),"),"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"OAuthCallback"),": Error in handling the response (",(0,i.kt)("a",{parentName:"li",href:"https://github.com/nextauthjs/next-auth/blob/main/packages/next-auth/src/core/lib/oauth/callback.ts"},"1"),", ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/nextauthjs/next-auth/blob/main/packages/next-auth/src/core/lib/oauth/pkce-handler.ts"},"2"),", ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/nextauthjs/next-auth/blob/main/packages/next-auth/src/core/lib/oauth/state-handler.ts"},"3"),") from an OAuth provider."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"OAuthCreateAccount"),": Could not create OAuth provider user in the database."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"EmailCreateAccount"),": Could not create email provider user in the database."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Callback"),": Error in the ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/nextauthjs/next-auth/blob/main/packages/next-auth/src/core/routes/callback.ts"},"OAuth callback handler route")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"OAuthAccountNotLinked"),": If the email on the account is already linked, but not with this OAuth account"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"EmailSignin"),": Sending the e-mail with the verification token failed"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"CredentialsSignin"),": The ",(0,i.kt)("inlineCode",{parentName:"li"},"authorize")," callback returned ",(0,i.kt)("inlineCode",{parentName:"li"},"null")," in the ",(0,i.kt)("a",{parentName:"li",href:"/providers/credentials"},"Credentials provider"),". We don't recommend providing information about which part of the credentials were wrong, as it might be abused by malicious hackers."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"SessionRequired"),": The content of this page requires you to be signed in at all times. See ",(0,i.kt)("a",{parentName:"li",href:"/getting-started/client#require-session"},"useSession")," for configuration."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Default"),": Catch all, will apply, if none of the above matched")),(0,i.kt)("p",null,"Example: ",(0,i.kt)("inlineCode",{parentName:"p"},"/auth/error?error=Default")),(0,i.kt)("h2",{id:"theming"},"Theming"),(0,i.kt)("p",null,"By default, the built-in pages will follow the system theme, utilizing the ",(0,i.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme"},(0,i.kt)("inlineCode",{parentName:"a"},"prefer-color-scheme"))," Media Query. You can override this to always use a dark or light theme, through the ",(0,i.kt)("a",{parentName:"p",href:"/configuration/options#theme"},(0,i.kt)("inlineCode",{parentName:"a"},"theme.colorScheme")," option"),"."),(0,i.kt)("p",null,"In addition, you can define a ",(0,i.kt)("inlineCode",{parentName:"p"},"theme.brandColor")," to define a custom accent color for these built-in pages. You can also define a URL to a logo in ",(0,i.kt)("inlineCode",{parentName:"p"},"theme.logo")," which will be rendered above the primary card in these pages."),(0,i.kt)("h4",{id:"sign-in"},"Sign In"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Customized Signin Page",src:n(4824).Z})),(0,i.kt)("h4",{id:"sign-out"},"Sign Out"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Customized Signout Page",src:n(2824).Z})),(0,i.kt)("h2",{id:"examples"},"Examples"),(0,i.kt)("h3",{id:"oauth-sign-in"},"OAuth Sign in"),(0,i.kt)("p",null,"In order to get the available authentication providers and the URLs to use for them, you can make a request to the API endpoint ",(0,i.kt)("inlineCode",{parentName:"p"},"/api/auth/providers"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="pages/auth/signin.js"',title:'"pages/auth/signin.js"'},'import { getProviders, signIn } from "next-auth/react"\n\nexport default function SignIn({ providers }) {\n  return (\n    <>\n      {Object.values(providers).map((provider) => (\n        <div key={provider.name}>\n          <button onClick={() => signIn(provider.id)}>\n            Sign in with {provider.name}\n          </button>\n        </div>\n      ))}\n    </>\n  )\n}\n\n// This is the recommended way for Next.js 9.3 or newer\nexport async function getServerSideProps(context) {\n  const providers = await getProviders()\n  return {\n    props: { providers },\n  }\n}\n\n/*\n// If older than Next.js 9.3\nSignIn.getInitialProps = async () => {\n  return {\n    providers: await getProviders()\n  }\n}\n*/\n')),(0,i.kt)("h3",{id:"email-sign-in"},"Email Sign in"),(0,i.kt)("p",null,"If you create a custom sign in form for email sign in, you will need to submit both fields for the ",(0,i.kt)("strong",{parentName:"p"},"email")," address and ",(0,i.kt)("strong",{parentName:"p"},"csrfToken")," from ",(0,i.kt)("strong",{parentName:"p"},"/api/auth/csrf")," in a POST request to ",(0,i.kt)("strong",{parentName:"p"},"/api/auth/signin/email"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="pages/auth/email-signin.js"',title:'"pages/auth/email-signin.js"'},'import { getCsrfToken } from "next-auth/react"\n\nexport default function SignIn({ csrfToken }) {\n  return (\n    <form method="post" action="/api/auth/signin/email">\n      <input name="csrfToken" type="hidden" defaultValue={csrfToken} />\n      <label>\n        Email address\n        <input type="email" id="email" name="email" />\n      </label>\n      <button type="submit">Sign in with Email</button>\n    </form>\n  )\n}\n\n// This is the recommended way for Next.js 9.3 or newer\nexport async function getServerSideProps(context) {\n  const csrfToken = await getCsrfToken(context)\n  return {\n    props: { csrfToken },\n  }\n}\n\n/*\n// If older than Next.js 9.3\nSignIn.getInitialProps = async (context) => {\n  return {\n    csrfToken: await getCsrfToken(context)\n  }\n}\n*/\n')),(0,i.kt)("p",null,"You can also use the ",(0,i.kt)("inlineCode",{parentName:"p"},"signIn()")," function which will handle obtaining the CSRF token for you:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},'signIn("email", { email: "jsmith@example.com" })\n')),(0,i.kt)("h3",{id:"credentials-sign-in"},"Credentials Sign in"),(0,i.kt)("p",null,"If you create a sign in form for credentials based authentication, you will need to pass a ",(0,i.kt)("strong",{parentName:"p"},"csrfToken")," from ",(0,i.kt)("strong",{parentName:"p"},"/api/auth/csrf")," in a POST request to ",(0,i.kt)("strong",{parentName:"p"},"/api/auth/callback/credentials"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="pages/auth/credentials-signin.js"',title:'"pages/auth/credentials-signin.js"'},'import { getCsrfToken } from "next-auth/react"\n\nexport default function SignIn({ csrfToken }) {\n  return (\n    <form method="post" action="/api/auth/callback/credentials">\n      <input name="csrfToken" type="hidden" defaultValue={csrfToken} />\n      <label>\n        Username\n        <input name="username" type="text" />\n      </label>\n      <label>\n        Password\n        <input name="password" type="password" />\n      </label>\n      <button type="submit">Sign in</button>\n    </form>\n  )\n}\n\n// This is the recommended way for Next.js 9.3 or newer\nexport async function getServerSideProps(context) {\n  return {\n    props: {\n      csrfToken: await getCsrfToken(context),\n    },\n  }\n}\n\n/*\n// If older than Next.js 9.3\nSignIn.getInitialProps = async (context) => {\n  return {\n    csrfToken: await getCsrfToken(context)\n  }\n}\n*/\n')),(0,i.kt)("p",null,"You can also use the ",(0,i.kt)("inlineCode",{parentName:"p"},"signIn()")," function which will handle obtaining the CSRF token for you:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},'signIn("credentials", { username: "jsmith", password: "1234" })\n')),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Remember to put any custom pages in a folder outside ",(0,i.kt)("strong",{parentName:"p"},"/pages/api")," which is reserved for API code. As per the examples above, a location convention suggestion is ",(0,i.kt)("inlineCode",{parentName:"p"},"pages/auth/..."),"."))))}d.isMDXComponent=!0},4824:function(e,t,n){t.Z=n.p+"assets/images/pages_signin-940a5db521096f0bace59b44ecfd78b1.png"},2824:function(e,t,n){t.Z=n.p+"assets/images/pages_signout-0d202813326a52aa99579ce9894b9064.png"}}]);