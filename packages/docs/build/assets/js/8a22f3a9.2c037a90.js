"use strict";(self.webpackChunknext_auth_docs=self.webpackChunknext_auth_docs||[]).push([[6367],{3905:function(e,r,t){t.d(r,{Zo:function(){return c},kt:function(){return p}});var n=t(7294);function i(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function o(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function a(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?o(Object(t),!0).forEach((function(r){i(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function l(e,r){if(null==e)return{};var t,n,i=function(e,r){if(null==e)return{};var t,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)t=o[n],r.indexOf(t)>=0||(i[t]=e[t]);return i}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var s=n.createContext({}),u=function(e){var r=n.useContext(s),t=r;return e&&(t="function"==typeof e?e(r):a(a({},r),e)),t},c=function(e){var r=u(e.components);return n.createElement(s.Provider,{value:r},e.children)},d={inlineCode:"code",wrapper:function(e){var r=e.children;return n.createElement(n.Fragment,{},r)}},h=n.forwardRef((function(e,r){var t=e.components,i=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),h=u(t),p=i,_=h["".concat(s,".").concat(p)]||h[p]||d[p]||o;return t?n.createElement(_,a(a({ref:r},c),{},{components:t})):n.createElement(_,a({ref:r},c))}));function p(e,r){var t=arguments,i=r&&r.mdxType;if("string"==typeof e||i){var o=t.length,a=new Array(o);a[0]=h;var l={};for(var s in r)hasOwnProperty.call(r,s)&&(l[s]=r[s]);l.originalType=e,l.mdxType="string"==typeof e?e:i,a[1]=l;for(var u=2;u<o;u++)a[u]=t[u];return n.createElement.apply(null,a)}return n.createElement.apply(null,t)}h.displayName="MDXCreateElement"},9764:function(e,r,t){t.r(r),t.d(r,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return u},toc:function(){return c},default:function(){return h}});var n=t(7462),i=t(3366),o=(t(7294),t(3905)),a=["components"],l={id:"errors",title:"Errors"},s=void 0,u={unversionedId:"errors",id:"errors",isDocsHomePage:!1,title:"Errors",description:"This is a list of errors output from NextAuth.js.",source:"@site/docs/errors.md",sourceDirName:".",slug:"/errors",permalink:"/errors",editUrl:"https://github.com/nextauthjs/docs/edit/main/docs/errors.md",tags:[],version:"current",lastUpdatedBy:"Bal\xe1zs Orb\xe1n",lastUpdatedAt:1643982356,formattedLastUpdatedAt:"2/4/2022",frontMatter:{id:"errors",title:"Errors"},sidebar:"docs",previous:{title:"Warnings",permalink:"/warnings"},next:{title:"Deployment",permalink:"/deployment"}},c=[{value:"Client",id:"client",children:[{value:"CLIENT_SESSION_ERROR",id:"client_session_error",children:[],level:4},{value:"CLIENT_FETCH_ERROR",id:"client_fetch_error",children:[],level:4}],level:2},{value:"Server",id:"server",children:[{value:"OAuth",id:"oauth",children:[{value:"OAUTH_GET_ACCESS_TOKEN_ERROR",id:"oauth_get_access_token_error",children:[],level:4},{value:"OAUTH_V1_GET_ACCESS_TOKEN_ERROR",id:"oauth_v1_get_access_token_error",children:[],level:4},{value:"OAUTH_GET_PROFILE_ERROR",id:"oauth_get_profile_error",children:[],level:4},{value:"OAUTH_PARSE_PROFILE_ERROR",id:"oauth_parse_profile_error",children:[],level:4},{value:"OAUTH_CALLBACK_HANDLER_ERROR",id:"oauth_callback_handler_error",children:[],level:4}],level:3},{value:"Signin / Callback",id:"signin--callback",children:[{value:"GET_AUTHORIZATION_URL_ERROR",id:"get_authorization_url_error",children:[],level:4},{value:"SIGNIN_OAUTH_ERROR",id:"signin_oauth_error",children:[],level:4},{value:"CALLBACK_OAUTH_ERROR",id:"callback_oauth_error",children:[],level:4},{value:"SIGNIN_EMAIL_ERROR",id:"signin_email_error",children:[],level:4},{value:"CALLBACK_EMAIL_ERROR",id:"callback_email_error",children:[],level:4},{value:"EMAIL_REQUIRES_ADAPTER_ERROR",id:"email_requires_adapter_error",children:[],level:4},{value:"CALLBACK_CREDENTIALS_JWT_ERROR",id:"callback_credentials_jwt_error",children:[],level:4},{value:"CALLBACK_CREDENTIALS_HANDLER_ERROR",id:"callback_credentials_handler_error",children:[],level:4},{value:"PKCE_ERROR",id:"pkce_error",children:[],level:4}],level:3},{value:"Session Handling",id:"session-handling",children:[{value:"JWT_SESSION_ERROR",id:"jwt_session_error",children:[],level:4},{value:"SESSION_ERROR",id:"session_error",children:[],level:4}],level:3},{value:"Signout",id:"signout",children:[{value:"SIGNOUT_ERROR",id:"signout_error",children:[],level:4}],level:3},{value:"Other",id:"other",children:[{value:"SEND_VERIFICATION_EMAIL_ERROR",id:"send_verification_email_error",children:[],level:4},{value:"MISSING_NEXTAUTH_API_ROUTE_ERROR",id:"missing_nextauth_api_route_error",children:[],level:4},{value:"NO_SECRET",id:"no_secret",children:[],level:4},{value:"oauth_callback_error expected 200 OK with body but no body was returned",id:"oauth_callback_error-expected-200-ok-with-body-but-no-body-was-returned",children:[],level:4}],level:3}],level:2}],d={toc:c};function h(e){var r=e.components,t=(0,i.Z)(e,a);return(0,o.kt)("wrapper",(0,n.Z)({},d,t,{components:r,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"This is a list of errors output from NextAuth.js."),(0,o.kt)("p",null,"All errors indicate an unexpected problem, you should not expect to see errors."),(0,o.kt)("p",null,"If you are seeing any of these errors in the console, something is wrong."),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"client"},"Client"),(0,o.kt)("p",null,"These errors are returned from the client. As the client is ",(0,o.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Isomorphic_JavaScript"},'Universal JavaScript (or "Isomorphic JavaScript")')," it can be run on the client or server, so these errors can occur both in the terminal and in the browser console."),(0,o.kt)("h4",{id:"client_session_error"},"CLIENT_SESSION_ERROR"),(0,o.kt)("p",null,"This error occurs when the ",(0,o.kt)("inlineCode",{parentName:"p"},"SessionProvider")," Context has a problem fetching session data."),(0,o.kt)("h4",{id:"client_fetch_error"},"CLIENT_FETCH_ERROR"),(0,o.kt)("p",null,"If you see ",(0,o.kt)("inlineCode",{parentName:"p"},"CLIENT_FETCH_ERROR")," make sure you have configured the ",(0,o.kt)("inlineCode",{parentName:"p"},"NEXTAUTH_URL")," environment variable."),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"server"},"Server"),(0,o.kt)("p",null,"These errors are displayed on the terminal."),(0,o.kt)("h3",{id:"oauth"},"OAuth"),(0,o.kt)("h4",{id:"oauth_get_access_token_error"},"OAUTH_GET_ACCESS_TOKEN_ERROR"),(0,o.kt)("p",null,"This occurs when there was an error in the POST request to the OAuth provider and we were not able to retrieve the access token."),(0,o.kt)("p",null,"Please double check your provider settings."),(0,o.kt)("h4",{id:"oauth_v1_get_access_token_error"},"OAUTH_V1_GET_ACCESS_TOKEN_ERROR"),(0,o.kt)("p",null,"This error is explicitly related to older OAuth v1.x providers, if you are using one of these, please double check all available settings."),(0,o.kt)("h4",{id:"oauth_get_profile_error"},"OAUTH_GET_PROFILE_ERROR"),(0,o.kt)("p",null,"N/A"),(0,o.kt)("h4",{id:"oauth_parse_profile_error"},"OAUTH_PARSE_PROFILE_ERROR"),(0,o.kt)("p",null,"This error is a result of either a problem with the provider response or the user canceling the action with the provider, unfortunately, we can't discern which with the information we have."),(0,o.kt)("p",null,"This error should also log the exception and available ",(0,o.kt)("inlineCode",{parentName:"p"},"profileData")," to further aid debugging."),(0,o.kt)("h4",{id:"oauth_callback_handler_error"},"OAUTH_CALLBACK_HANDLER_ERROR"),(0,o.kt)("p",null,"This error will occur when there was an issue parsing the JSON request body, for example."),(0,o.kt)("p",null,"There should also be further details logged when this occurs, such as the error is thrown, and the request body itself to aid in debugging."),(0,o.kt)("hr",null),(0,o.kt)("h3",{id:"signin--callback"},"Signin / Callback"),(0,o.kt)("h4",{id:"get_authorization_url_error"},"GET_AUTHORIZATION_URL_ERROR"),(0,o.kt)("p",null,"This error can occur when we cannot get the OAuth v1 request token and generate the authorization URL."),(0,o.kt)("p",null,"Please double check your OAuth v1 provider settings, especially the OAuth token and OAuth token secret."),(0,o.kt)("h4",{id:"signin_oauth_error"},"SIGNIN_OAUTH_ERROR"),(0,o.kt)("p",null,"This error can occur in one of a few places, first during the redirect to the authorization URL of the provider. Next, in the signin flow while creating the PKCE code verifier. Finally, during the generation of the CSRF Token hash in the internal state during signin."),(0,o.kt)("p",null,"Please check your OAuth provider settings and make sure your URLs and other options are correctly set on the provider side."),(0,o.kt)("h4",{id:"callback_oauth_error"},"CALLBACK_OAUTH_ERROR"),(0,o.kt)("p",null,"This can occur during the handling of the callback if the ",(0,o.kt)("inlineCode",{parentName:"p"},"code_verifier")," cookie was not found or an invalid state was returned from the OAuth provider."),(0,o.kt)("h4",{id:"signin_email_error"},"SIGNIN_EMAIL_ERROR"),(0,o.kt)("p",null,"This error can occur when a user tries to sign in via an email link; for example, if the email token could not be generated or the verification request failed."),(0,o.kt)("p",null,"Please double check your email settings."),(0,o.kt)("h4",{id:"callback_email_error"},"CALLBACK_EMAIL_ERROR"),(0,o.kt)("p",null,"This can occur during the email callback process. Specifically, if there was an error signing the user in via email, encoding the jwt, etc."),(0,o.kt)("p",null,"Please double check your Email settings."),(0,o.kt)("h4",{id:"email_requires_adapter_error"},"EMAIL_REQUIRES_ADAPTER_ERROR"),(0,o.kt)("p",null,"The Email authentication provider can only be used if a database is configured."),(0,o.kt)("p",null,"This is required to store the verification token. Please see the ",(0,o.kt)("a",{parentName:"p",href:"/providers/email#configuration"},"email provider")," for more details."),(0,o.kt)("h4",{id:"callback_credentials_jwt_error"},"CALLBACK_CREDENTIALS_JWT_ERROR"),(0,o.kt)("p",null,"The Credentials Provider can only be used if JSON Web Tokens are used for sessions."),(0,o.kt)("p",null,"JSON Web Tokens are used for Sessions by default if you have not specified a database. However, if you are using a database, then Database Sessions are enabled by default and you need to ",(0,o.kt)("a",{parentName:"p",href:"https://next-auth.js.org/configuration/options#session"},"explicitly enable JWT Sessions")," to use the Credentials Provider."),(0,o.kt)("p",null,"If you are using a Credentials Provider, NextAuth.js will not persist users or sessions in a database - user accounts used with the Credentials Provider must be created and managed outside of NextAuth.js."),(0,o.kt)("p",null,"In ",(0,o.kt)("em",{parentName:"p"},"most cases")," it does not make sense to specify a database in NextAuth.js options and support a Credentials Provider."),(0,o.kt)("h4",{id:"callback_credentials_handler_error"},"CALLBACK_CREDENTIALS_HANDLER_ERROR"),(0,o.kt)("p",null,"This error occurs when there was no ",(0,o.kt)("inlineCode",{parentName:"p"},"authorize()")," handler defined on the credential authentication provider."),(0,o.kt)("h4",{id:"pkce_error"},"PKCE_ERROR"),(0,o.kt)("p",null,"The provider you tried to use failed when setting ",(0,o.kt)("a",{parentName:"p",href:"https://tools.ietf.org/html/rfc7636#section-4.2"},"PKCE or Proof Key for Code Exchange"),".\nThe ",(0,o.kt)("inlineCode",{parentName:"p"},"code_verifier")," is saved in a cookie called (by default) ",(0,o.kt)("inlineCode",{parentName:"p"},"__Secure-next-auth.pkce.code_verifier")," which expires after 15 minutes.\nCheck if ",(0,o.kt)("inlineCode",{parentName:"p"},"cookies.pkceCodeVerifier")," is configured correctly. The default ",(0,o.kt)("inlineCode",{parentName:"p"},"code_challenge_method")," is ",(0,o.kt)("inlineCode",{parentName:"p"},'"S256"'),". This is currently not configurable to ",(0,o.kt)("inlineCode",{parentName:"p"},'"plain"'),", as it is not recommended, and in most cases, it is only supported for backward compatibility."),(0,o.kt)("hr",null),(0,o.kt)("h3",{id:"session-handling"},"Session Handling"),(0,o.kt)("h4",{id:"jwt_session_error"},"JWT_SESSION_ERROR"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://next-auth.js.org/errors#jwt_session_error"},"https://next-auth.js.org/errors#jwt_session_error")," JWKKeySupport: the key does not support HS512 verify algorithm"),(0,o.kt)("p",null,"The algorithm used for generating your key isn't listed as supported. You can generate a HS512 key using"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"  jose newkey -s 512 -t oct -a HS512\n")),(0,o.kt)("h4",{id:"session_error"},"SESSION_ERROR"),(0,o.kt)("hr",null),(0,o.kt)("h3",{id:"signout"},"Signout"),(0,o.kt)("h4",{id:"signout_error"},"SIGNOUT_ERROR"),(0,o.kt)("p",null,"This error occurs when there was an issue deleting the session from the database, for example."),(0,o.kt)("hr",null),(0,o.kt)("h3",{id:"other"},"Other"),(0,o.kt)("h4",{id:"send_verification_email_error"},"SEND_VERIFICATION_EMAIL_ERROR"),(0,o.kt)("p",null,"This error occurs when the Email Authentication Provider is unable to send an email."),(0,o.kt)("p",null,"Check your mail server configuration."),(0,o.kt)("h4",{id:"missing_nextauth_api_route_error"},"MISSING_NEXTAUTH_API_ROUTE_ERROR"),(0,o.kt)("p",null,"This error happens when ",(0,o.kt)("inlineCode",{parentName:"p"},"[...nextauth].js")," file is not found inside ",(0,o.kt)("inlineCode",{parentName:"p"},"pages/api/auth"),"."),(0,o.kt)("p",null,"Make sure the file is there and the filename is written correctly."),(0,o.kt)("h4",{id:"no_secret"},"NO_SECRET"),(0,o.kt)("p",null,"In production, we expect you to define a ",(0,o.kt)("inlineCode",{parentName:"p"},"secret")," property in your configuration. In development, this is shown as a warning for convenience. ",(0,o.kt)("a",{parentName:"p",href:"https://next-auth.js.org/configuration/options#secret"},"Read more")),(0,o.kt)("h4",{id:"oauth_callback_error-expected-200-ok-with-body-but-no-body-was-returned"},"oauth_callback_error expected 200 OK with body but no body was returned"),(0,o.kt)("p",null,"This error might happen with some of the providers. It happens due to ",(0,o.kt)("inlineCode",{parentName:"p"},"openid-client"),"(which is peer dependency) node version mismatch. For instance, ",(0,o.kt)("inlineCode",{parentName:"p"},"openid-client")," requires ",(0,o.kt)("inlineCode",{parentName:"p"},">=14.2.0")," for ",(0,o.kt)("inlineCode",{parentName:"p"},"lts/fermium")," and has similar limits for the other versions. For the full list of the compatible node versions please see ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/panva/node-openid-client/blob/2a84e46992e1ebeaf685c3f87b65663d126e81aa/package.json#L78"},"package.json")))}h.isMDXComponent=!0}}]);