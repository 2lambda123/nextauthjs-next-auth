"use strict";(self.webpackChunknext_auth_docs=self.webpackChunknext_auth_docs||[]).push([[2121],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return m}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=a.createContext({}),l=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=l(e.components);return a.createElement(p.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,p=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),d=l(n),m=r,h=d["".concat(p,".").concat(m)]||d[m]||c[m]||i;return n?a.createElement(h,o(o({ref:t},u),{},{components:n})):a.createElement(h,o({ref:t},u))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=d;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var l=2;l<i;l++)o[l]=n[l];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},2735:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return p},metadata:function(){return l},toc:function(){return u},default:function(){return d}});var a=n(7462),r=n(3366),i=(n(7294),n(3905)),o=["components"],s={id:"typescript",title:"TypeScript"},p=void 0,l={unversionedId:"getting-started/typescript",id:"version-v3/getting-started/typescript",isDocsHomePage:!1,title:"TypeScript",description:"NextAuth.js comes with its own type definitions, so you can safely use it in your TypeScript projects. Even if you don't use TypeScript, IDEs like VSCode will pick this up, to provide you with a better developer experience. While you are typing, you will get suggestions about what certain objects/functions look like, and sometimes also links to documentation, examples and other useful resources.",source:"@site/versioned_docs/version-v3/getting-started/typescript.md",sourceDirName:"getting-started",slug:"/getting-started/typescript",permalink:"/v3/getting-started/typescript",editUrl:"https://github.com/nextauthjs/docs/edit/main/versioned_docs/version-v3/getting-started/typescript.md",tags:[],version:"v3",lastUpdatedBy:"Bal\xe1zs Orb\xe1n",lastUpdatedAt:1643982356,formattedLastUpdatedAt:"2/4/2022",frontMatter:{id:"typescript",title:"TypeScript"},sidebar:"version-v3/docs",previous:{title:"REST API",permalink:"/v3/getting-started/rest-api"},next:{title:"Options",permalink:"/v3/configuration/options"}},u=[{value:"Adapters",id:"adapters",children:[],level:2},{value:"Module Augmentation",id:"module-augmentation",children:[{value:"Main module",id:"main-module",children:[{value:"Popular interfaces to augment",id:"popular-interfaces-to-augment",children:[],level:4}],level:3},{value:"Submodules",id:"submodules",children:[],level:3},{value:"Useful links",id:"useful-links",children:[],level:3}],level:2},{value:"Contributing",id:"contributing",children:[],level:2}],c={toc:u};function d(e){var t=e.components,n=(0,r.Z)(e,o);return(0,i.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"NextAuth.js comes with its own type definitions, so you can safely use it in your TypeScript projects. Even if you don't use TypeScript, IDEs like VSCode will pick this up, to provide you with a better developer experience. While you are typing, you will get suggestions about what certain objects/functions look like, and sometimes also links to documentation, examples and other useful resources."),(0,i.kt)("p",null,"Check out the example repository showcasing how to use ",(0,i.kt)("inlineCode",{parentName:"p"},"next-auth")," on a Next.js application with TypeScript:",(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("a",{parentName:"p",href:"https://github.com/nextauthjs/next-auth-typescript-example"},"https://github.com/nextauthjs/next-auth-typescript-example")),(0,i.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"The types at ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/DefinitelyTyped/DefinitelyTyped"},"DefinitelyTyped")," under the name of ",(0,i.kt)("inlineCode",{parentName:"p"},"@types/next-auth")," are now deprecated, and not maintained anymore."))),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"adapters"},"Adapters"),(0,i.kt)("p",null,"If you're writing your own custom Adapter, you can take advantage of the types to make sure your implementation conforms to what's expected:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},'import type { Adapter } from "next-auth/adapters"\n\nconst MyAdapter: Adapter = () => {\n  return {\n    async getAdapter() {\n      return {\n        // your adapter methods here\n      }\n    },\n  }\n}\n')),(0,i.kt)("p",null,"When writing your own custom Adapter in plain JavaScript, note that you can use ",(0,i.kt)("strong",{parentName:"p"},"JSDoc")," to get helpful editor hints and auto-completion like so:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},'/** @type { import("next-auth/adapters").Adapter } */\nconst MyAdapter = () => {\n  return {\n    async getAdapter() {\n      return {\n        // your adapter methods here\n      }\n    },\n  }\n}\n')),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"This will work in code editors with a strong TypeScript integration like VSCode or WebStorm. It might not work if you're using more lightweight editors like VIM or Atom."))),(0,i.kt)("h2",{id:"module-augmentation"},"Module Augmentation"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"next-auth")," comes with certain types/interfaces, that are shared across submodules. Good examples are ",(0,i.kt)("inlineCode",{parentName:"p"},"Session")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"JWT"),". Ideally, you should only need to create these types at a single place, and TS should pick them up in every location where they are referenced. Luckily, this is exactly what Module Augmentation can do for us. Define your shared interfaces in a single location, and get type-safety across your application, when you use ",(0,i.kt)("inlineCode",{parentName:"p"},"next-auth")," (or one of its submodules)."),(0,i.kt)("h3",{id:"main-module"},"Main module"),(0,i.kt)("p",null,"Let's look at ",(0,i.kt)("inlineCode",{parentName:"p"},"Session"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="pages/api/[...nextauth].ts"',title:'"pages/api/[...nextauth].ts"'},'import NextAuth from "next-auth"\n\nexport default NextAuth({\n  callbacks: {\n    session(session, token) {\n      return session // The type here should match the one returned in `useSession()`\n    },\n  },\n})\n')),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="pages/index.ts"',title:'"pages/index.ts"'},'import { useSession } from "next-auth/client"\n\nexport default function IndexPage() {\n  // `session` should match `callbacks.session()` in `NextAuth()`\n  const [session] = useSession()\n\n  return (\n    // Your component\n  )\n}\n')),(0,i.kt)("p",null,"To extend/augment this type, create a ",(0,i.kt)("inlineCode",{parentName:"p"},"types/next-auth.d.ts")," file in your project:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="types/next-auth.d.ts"',title:'"types/next-auth.d.ts"'},'import NextAuth from "next-auth"\n\ndeclare module "next-auth" {\n  /**\n   * Returned by `useSession`, `getSession` and received as a prop on the `Provider` React Context\n   */\n  interface Session {\n    user: {\n      /** The user\'s postal address. */\n      address: string\n    }\n  }\n}\n')),(0,i.kt)("h4",{id:"popular-interfaces-to-augment"},"Popular interfaces to augment"),(0,i.kt)("p",null,"Although you can augment almost anything, here are some of the more common interfaces that you might want to override in the ",(0,i.kt)("inlineCode",{parentName:"p"},"next-auth")," module:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"/**\n * The shape of the user object returned in the OAuth providers' `profile` callback,\n * or the second parameter of the `session` callback, when using a database.\n */\ninterface User {}\n/**\n * Usually contains information about the provider being used\n * and also extends `TokenSet`, which is different tokens returned by OAuth Providers.\n */\ninterface Account {}\n/** The OAuth profile returned from your provider */\ninterface Profile {}\n")),(0,i.kt)("p",null,"Make sure that the ",(0,i.kt)("inlineCode",{parentName:"p"},"types")," folder is added to ",(0,i.kt)("a",{parentName:"p",href:"https://www.typescriptlang.org/tsconfig/#typeRoots"},(0,i.kt)("inlineCode",{parentName:"a"},"typeRoots"))," in your project's ",(0,i.kt)("inlineCode",{parentName:"p"},"tsconfig.json")," file."),(0,i.kt)("h3",{id:"submodules"},"Submodules"),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"JWT")," interface can be found in the ",(0,i.kt)("inlineCode",{parentName:"p"},"next-auth/jwt")," submodule:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="types/next-auth.d.ts"',title:'"types/next-auth.d.ts"'},'declare module "next-auth/jwt" {\n  /** Returned by the `jwt` callback and `getToken`, when using JWT sessions */\n  interface JWT {\n    /** OpenID ID Token */\n    idToken?: string\n  }\n}\n')),(0,i.kt)("h3",{id:"useful-links"},"Useful links"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"https://www.typescriptlang.org/docs/handbook/declaration-merging.html#module-augmentation"},"TypeScript documentation: Module Augmentation")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"https://www.digitalocean.com/community/tutorials/typescript-module-augmentation"},"Digital Ocean: Module Augmentation in TypeScript"))),(0,i.kt)("h2",{id:"contributing"},"Contributing"),(0,i.kt)("p",null,"Contributions of any kind are always welcome, especially for TypeScript. Please keep in mind that we are a small team working on this project in our free time. We will try our best to give support, but if you think you have a solution for a problem, please open a PR!"),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"When contributing to TypeScript, if the actual JavaScript user API does not change in a breaking manner, we reserve the right to push any TypeScript change in a minor release. This is to ensure that we can keep us on a faster release cycle."))))}d.isMDXComponent=!0}}]);