"use strict";(self.webpackChunknext_auth_docs=self.webpackChunknext_auth_docs||[]).push([[3746],{3905:function(e,n,t){t.d(n,{Zo:function(){return u},kt:function(){return m}});var r=t(7294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var p=r.createContext({}),l=function(e){var n=r.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):a(a({},n),e)),t},u=function(e){var n=l(e.components);return r.createElement(p.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},c=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,i=e.originalType,p=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),c=l(t),m=o,v=c["".concat(p,".").concat(m)]||c[m]||d[m]||i;return t?r.createElement(v,a(a({ref:n},u),{},{components:t})):r.createElement(v,a({ref:n},u))}));function m(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var i=t.length,a=new Array(i);a[0]=c;var s={};for(var p in n)hasOwnProperty.call(n,p)&&(s[p]=n[p]);s.originalType=e,s.mdxType="string"==typeof e?e:o,a[1]=s;for(var l=2;l<i;l++)a[l]=t[l];return r.createElement.apply(null,a)}return r.createElement.apply(null,t)}c.displayName="MDXCreateElement"},9129:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return s},contentTitle:function(){return p},metadata:function(){return l},toc:function(){return u},default:function(){return c}});var r=t(7462),o=t(3366),i=(t(7294),t(3905)),a=["components"],s={id:"workos",title:"WorkOS"},p=void 0,l={unversionedId:"providers/workos",id:"version-v3/providers/workos",isDocsHomePage:!1,title:"WorkOS",description:"Documentation",source:"@site/versioned_docs/version-v3/providers/workos.md",sourceDirName:"providers",slug:"/providers/workos",permalink:"/v3/providers/workos",editUrl:"https://github.com/nextauthjs/docs/edit/main/versioned_docs/version-v3/providers/workos.md",tags:[],version:"v3",lastUpdatedBy:"Bal\xe1zs Orb\xe1n",lastUpdatedAt:1643982356,formattedLastUpdatedAt:"2/4/2022",frontMatter:{id:"workos",title:"WorkOS"},sidebar:"version-v3/docs",previous:{title:"WordPress.com",permalink:"/v3/providers/wordpress"},next:{title:"Yandex",permalink:"/v3/providers/yandex"}},u=[{value:"Documentation",id:"documentation",children:[],level:2},{value:"Configuration",id:"configuration",children:[],level:2},{value:"Options",id:"options",children:[],level:2},{value:"Example",id:"example",children:[],level:2}],d={toc:u};function c(e){var n=e.components,t=(0,o.Z)(e,a);return(0,i.kt)("wrapper",(0,r.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"documentation"},"Documentation"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://workos.com/docs/sso/guide"},"https://workos.com/docs/sso/guide")),(0,i.kt)("h2",{id:"configuration"},"Configuration"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://dashboard.workos.com"},"https://dashboard.workos.com")),(0,i.kt)("h2",{id:"options"},"Options"),(0,i.kt)("p",null,"The ",(0,i.kt)("strong",{parentName:"p"},"WorkOS Provider")," comes with a set of default options:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/nextauthjs/next-auth/blob/main/src/providers/workos.js"},"WorkOS Provider options"))),(0,i.kt)("p",null,"You can override any of the options to suit your own use case."),(0,i.kt)("h2",{id:"example"},"Example"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"import Providers from `next-auth/providers`\n...\nproviders: [\n  Providers.WorkOS({\n    clientId: process.env.WORKOS_CLIENT_ID,\n    clientSecret: process.env.WORKOS_API_KEY,\n  }),\n],\n...\n")),(0,i.kt)("p",null,"WorkOS is not an identity provider itself, but, rather, a bridge to multiple single sign-on (SSO) providers. As a result, we need to make some additional changes to authenticate users using WorkOS."),(0,i.kt)("p",null,"In order to sign a user in using WorkOS, we need to specify which WorkOS Connection to use. A common way to do this is to collect the user's email address and extract the domain."),(0,i.kt)("p",null,"This can be done using a custom login page."),(0,i.kt)("p",null,"To add a custom login page, you can use the ",(0,i.kt)("inlineCode",{parentName:"p"},"pages")," option:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript",metastring:'title="pages/api/auth/[...nextauth].js"',title:'"pages/api/auth/[...nextauth].js"'},"...\n  pages: {\n    signIn: '/auth/signin',\n  }\n")),(0,i.kt)("p",null,"We can then add a custom login page that displays an input where the user can enter their email address. We then extract the domain from the user's email address and pass it to the ",(0,i.kt)("inlineCode",{parentName:"p"},"authorizationParams")," parameter on the ",(0,i.kt)("inlineCode",{parentName:"p"},"signIn")," function:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="pages/auth/signin.js"',title:'"pages/auth/signin.js"'},'import { getProviders, signIn } from "next-auth/client"\n\nexport default function SignIn({ providers }) {\n  const [email, setEmail] = useState("")\n\n  return (\n    <>\n      {Object.values(providers).map((provider) => {\n        if (provider.id === "workos") {\n          return (\n            <div key={provider.id}>\n              <input\n                type="email"\n                value={email}\n                placeholder="Email"\n                onChange={(event) => setEmail(event.target.value)}\n              />\n              <button\n                onClick={() =>\n                  signIn(provider.id, undefined, {\n                    domain: email.split("@")[1],\n                  })\n                }\n              >\n                Sign in with SSO\n              </button>\n            </div>\n          )\n        }\n\n        return (\n          <div key={provider.id}>\n            <button onClick={() => signIn(provider.id)}>\n              Sign in with {provider.name}\n            </button>\n          </div>\n        )\n      })}\n    </>\n  )\n}\n\n// This is the recommended way for Next.js 9.3 or newer\nexport async function getServerSideProps(context) {\n  const providers = await getProviders()\n  return {\n    props: { providers },\n  }\n}\n\n/*\n// If older than Next.js 9.3\nSignIn.getInitialProps = async () => {\n  return {\n    providers: await getProviders()\n  }\n}\n*/\n')))}c.isMDXComponent=!0}}]);