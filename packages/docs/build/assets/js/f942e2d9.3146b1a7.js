"use strict";(self.webpackChunknext_auth_docs=self.webpackChunknext_auth_docs||[]).push([[6148],{3905:function(e,r,t){t.d(r,{Zo:function(){return d},kt:function(){return R}});var i=t(7294);function n(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function o(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,i)}return t}function a(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?o(Object(t),!0).forEach((function(r){n(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function l(e,r){if(null==e)return{};var t,i,n=function(e,r){if(null==e)return{};var t,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)t=o[i],r.indexOf(t)>=0||(n[t]=e[t]);return n}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)t=o[i],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}var _=i.createContext({}),s=function(e){var r=i.useContext(_),t=r;return e&&(t="function"==typeof e?e(r):a(a({},r),e)),t},d=function(e){var r=s(e.components);return i.createElement(_.Provider,{value:r},e.children)},u={inlineCode:"code",wrapper:function(e){var r=e.children;return i.createElement(i.Fragment,{},r)}},c=i.forwardRef((function(e,r){var t=e.components,n=e.mdxType,o=e.originalType,_=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),c=s(t),R=n,E=c["".concat(_,".").concat(R)]||c[R]||u[R]||o;return t?i.createElement(E,a(a({ref:r},d),{},{components:t})):i.createElement(E,a({ref:r},d))}));function R(e,r){var t=arguments,n=r&&r.mdxType;if("string"==typeof e||n){var o=t.length,a=new Array(o);a[0]=c;var l={};for(var _ in r)hasOwnProperty.call(r,_)&&(l[_]=r[_]);l.originalType=e,l.mdxType="string"==typeof e?e:n,a[1]=l;for(var s=2;s<o;s++)a[s]=t[s];return i.createElement.apply(null,a)}return i.createElement.apply(null,t)}c.displayName="MDXCreateElement"},2729:function(e,r,t){t.r(r),t.d(r,{frontMatter:function(){return l},contentTitle:function(){return _},metadata:function(){return s},toc:function(){return d},default:function(){return c}});var i=t(7462),n=t(3366),o=(t(7294),t(3905)),a=["components"],l={id:"errors",title:"Errors"},_=void 0,s={unversionedId:"errors",id:"version-v3/errors",isDocsHomePage:!1,title:"Errors",description:"This is a list of errors output from NextAuth.js.",source:"@site/versioned_docs/version-v3/errors.md",sourceDirName:".",slug:"/errors",permalink:"/v3/errors",editUrl:"https://github.com/nextauthjs/docs/edit/main/versioned_docs/version-v3/errors.md",tags:[],version:"v3",lastUpdatedBy:"Bal\xe1zs Orb\xe1n",lastUpdatedAt:1643982356,formattedLastUpdatedAt:"2/4/2022",frontMatter:{id:"errors",title:"Errors"},sidebar:"version-v3/docs",previous:{title:"Warnings",permalink:"/v3/warnings"}},d=[{value:"Client",id:"client",children:[{value:"CLIENT_USE_SESSION_ERROR",id:"client_use_session_error",children:[],level:4},{value:"CLIENT_FETCH_ERROR",id:"client_fetch_error",children:[],level:4}],level:2},{value:"Server",id:"server",children:[{value:"OAuth",id:"oauth",children:[{value:"OAUTH_GET_ACCESS_TOKEN_ERROR",id:"oauth_get_access_token_error",children:[],level:4},{value:"OAUTH_V1_GET_ACCESS_TOKEN_ERROR",id:"oauth_v1_get_access_token_error",children:[],level:4},{value:"OAUTH_GET_PROFILE_ERROR",id:"oauth_get_profile_error",children:[],level:4},{value:"OAUTH_PARSE_PROFILE_ERROR",id:"oauth_parse_profile_error",children:[],level:4},{value:"OAUTH_CALLBACK_HANDLER_ERROR",id:"oauth_callback_handler_error",children:[],level:4}],level:3},{value:"Signin / Callback",id:"signin--callback",children:[{value:"GET_AUTHORIZATION_URL_ERROR",id:"get_authorization_url_error",children:[],level:4},{value:"SIGNIN_OAUTH_ERROR",id:"signin_oauth_error",children:[],level:4},{value:"CALLBACK_OAUTH_ERROR",id:"callback_oauth_error",children:[],level:4},{value:"SIGNIN_EMAIL_ERROR",id:"signin_email_error",children:[],level:4},{value:"CALLBACK_EMAIL_ERROR",id:"callback_email_error",children:[],level:4},{value:"EMAIL_REQUIRES_ADAPTER_ERROR",id:"email_requires_adapter_error",children:[],level:4},{value:"CALLBACK_CREDENTIALS_JWT_ERROR",id:"callback_credentials_jwt_error",children:[],level:4},{value:"CALLBACK_CREDENTIALS_HANDLER_ERROR",id:"callback_credentials_handler_error",children:[],level:4},{value:"PKCE_ERROR",id:"pkce_error",children:[],level:4}],level:3},{value:"Session Handling",id:"session-handling",children:[{value:"JWT_SESSION_ERROR",id:"jwt_session_error",children:[],level:4},{value:"SESSION_ERROR",id:"session_error",children:[],level:4}],level:3},{value:"Signout",id:"signout",children:[{value:"SIGNOUT_ERROR",id:"signout_error",children:[],level:4}],level:3},{value:"Database",id:"database",children:[{value:"ADAPTER_CONNECTION_ERROR",id:"adapter_connection_error",children:[],level:4},{value:"CREATE_USER_ERROR",id:"create_user_error",children:[],level:4},{value:"GET_USER_BY_ID_ERROR",id:"get_user_by_id_error",children:[],level:4},{value:"GET_USER_BY_EMAIL_ERROR",id:"get_user_by_email_error",children:[],level:4},{value:"GET_USER_BY_PROVIDER_ACCOUNT_ID_ERROR",id:"get_user_by_provider_account_id_error",children:[],level:4},{value:"LINK_ACCOUNT_ERROR",id:"link_account_error",children:[],level:4},{value:"CREATE_SESSION_ERROR",id:"create_session_error",children:[],level:4},{value:"GET_SESSION_ERROR",id:"get_session_error",children:[],level:4},{value:"UPDATE_SESSION_ERROR",id:"update_session_error",children:[],level:4},{value:"DELETE_SESSION_ERROR",id:"delete_session_error",children:[],level:4},{value:"CREATE_VERIFICATION_REQUEST_ERROR",id:"create_verification_request_error",children:[],level:4},{value:"GET_VERIFICATION_REQUEST_ERROR",id:"get_verification_request_error",children:[],level:4},{value:"DELETE_VERIFICATION_REQUEST_ERROR",id:"delete_verification_request_error",children:[],level:4}],level:3},{value:"Other",id:"other",children:[{value:"SEND_VERIFICATION_EMAIL_ERROR",id:"send_verification_email_error",children:[],level:4},{value:"MISSING_NEXTAUTH_API_ROUTE_ERROR",id:"missing_nextauth_api_route_error",children:[],level:4}],level:3}],level:2}],u={toc:d};function c(e){var r=e.components,t=(0,n.Z)(e,a);return(0,o.kt)("wrapper",(0,i.Z)({},u,t,{components:r,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"This is a list of errors output from NextAuth.js."),(0,o.kt)("p",null,"All errors indicate an unexpected problem, you should not expect to see errors."),(0,o.kt)("p",null,"If you are seeing any of these errors in the console, something is wrong."),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"client"},"Client"),(0,o.kt)("p",null,"These errors are returned from the client. As the client is ",(0,o.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Isomorphic_JavaScript"},'Universal JavaScript (or "Isomorphic JavaScript")')," it can be run on the client or server, so these errors can occur in both in the terminal and in the browser console."),(0,o.kt)("h4",{id:"client_use_session_error"},"CLIENT_USE_SESSION_ERROR"),(0,o.kt)("p",null,"This error occurs when the ",(0,o.kt)("inlineCode",{parentName:"p"},"useSession()")," React Hook has a problem fetching session data."),(0,o.kt)("h4",{id:"client_fetch_error"},"CLIENT_FETCH_ERROR"),(0,o.kt)("p",null,"If you see ",(0,o.kt)("inlineCode",{parentName:"p"},"CLIENT_FETCH_ERROR")," make sure you have configured the ",(0,o.kt)("inlineCode",{parentName:"p"},"NEXTAUTH_URL")," environment variable."),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"server"},"Server"),(0,o.kt)("p",null,"These errors are displayed on the terminal."),(0,o.kt)("h3",{id:"oauth"},"OAuth"),(0,o.kt)("h4",{id:"oauth_get_access_token_error"},"OAUTH_GET_ACCESS_TOKEN_ERROR"),(0,o.kt)("h4",{id:"oauth_v1_get_access_token_error"},"OAUTH_V1_GET_ACCESS_TOKEN_ERROR"),(0,o.kt)("h4",{id:"oauth_get_profile_error"},"OAUTH_GET_PROFILE_ERROR"),(0,o.kt)("h4",{id:"oauth_parse_profile_error"},"OAUTH_PARSE_PROFILE_ERROR"),(0,o.kt)("h4",{id:"oauth_callback_handler_error"},"OAUTH_CALLBACK_HANDLER_ERROR"),(0,o.kt)("hr",null),(0,o.kt)("h3",{id:"signin--callback"},"Signin / Callback"),(0,o.kt)("h4",{id:"get_authorization_url_error"},"GET_AUTHORIZATION_URL_ERROR"),(0,o.kt)("h4",{id:"signin_oauth_error"},"SIGNIN_OAUTH_ERROR"),(0,o.kt)("h4",{id:"callback_oauth_error"},"CALLBACK_OAUTH_ERROR"),(0,o.kt)("h4",{id:"signin_email_error"},"SIGNIN_EMAIL_ERROR"),(0,o.kt)("h4",{id:"callback_email_error"},"CALLBACK_EMAIL_ERROR"),(0,o.kt)("h4",{id:"email_requires_adapter_error"},"EMAIL_REQUIRES_ADAPTER_ERROR"),(0,o.kt)("p",null,"The Email authentication provider can only be used if a database is configured."),(0,o.kt)("h4",{id:"callback_credentials_jwt_error"},"CALLBACK_CREDENTIALS_JWT_ERROR"),(0,o.kt)("p",null,"The Credentials Provider can only be used if JSON Web Tokens are used for sessions."),(0,o.kt)("p",null,"JSON Web Tokens are used for Sessions by default if you have not specified a database. However if you are using a database, then Database Sessions are enabled by default and you need to ",(0,o.kt)("a",{parentName:"p",href:"https://next-auth.js.org/configuration/options#session"},"explicitly enable JWT Sessions")," to use the Credentials Provider."),(0,o.kt)("p",null,"If you are using a Credentials Provider, NextAuth.js will not persist users or sessions in a database - user accounts used with the Credentials Provider must be created and managed outside of NextAuth.js."),(0,o.kt)("p",null,"In ",(0,o.kt)("em",{parentName:"p"},"most cases")," it does not make sense to specify a database in NextAuth.js options and support a Credentials Provider."),(0,o.kt)("h4",{id:"callback_credentials_handler_error"},"CALLBACK_CREDENTIALS_HANDLER_ERROR"),(0,o.kt)("h4",{id:"pkce_error"},"PKCE_ERROR"),(0,o.kt)("p",null,"The provider you tried to use failed when setting ",(0,o.kt)("a",{parentName:"p",href:"https://tools.ietf.org/html/rfc7636#section-4.2"},"PKCE or Proof Key for Code Exchange"),".\nThe ",(0,o.kt)("inlineCode",{parentName:"p"},"code_verifier")," is saved in a cookie called (by default) ",(0,o.kt)("inlineCode",{parentName:"p"},"__Secure-next-auth.pkce.code_verifier")," which expires after 15 minutes.\nCheck if ",(0,o.kt)("inlineCode",{parentName:"p"},"cookies.pkceCodeVerifier")," is configured correctly. The default ",(0,o.kt)("inlineCode",{parentName:"p"},"code_challenge_method")," is ",(0,o.kt)("inlineCode",{parentName:"p"},'"S256"'),". This is currently not configurable to ",(0,o.kt)("inlineCode",{parentName:"p"},'"plain"'),", as it is not recommended, and in most cases it is only supported for backward compatibility."),(0,o.kt)("hr",null),(0,o.kt)("h3",{id:"session-handling"},"Session Handling"),(0,o.kt)("h4",{id:"jwt_session_error"},"JWT_SESSION_ERROR"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://next-auth.js.org/errors#jwt_session_error"},"https://next-auth.js.org/errors#jwt_session_error")," JWKKeySupport: the key does not support HS512 verify algorithm"),(0,o.kt)("p",null,"The algorithm used for generating your key isn't listed as supported. You can generate a HS512 key using"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"  jose newkey -s 512 -t oct -a HS512\n")),(0,o.kt)("p",null,"If you are unable to use an HS512 key (for example to interoperate with other services) you can define what is supported using"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'  jwt: {\n    signingKey: {"kty":"oct","kid":"--","alg":"HS256","k":"--"},\n    verificationOptions: {\n      algorithms: ["HS256"]\n    }\n  }\n')),(0,o.kt)("h4",{id:"session_error"},"SESSION_ERROR"),(0,o.kt)("hr",null),(0,o.kt)("h3",{id:"signout"},"Signout"),(0,o.kt)("h4",{id:"signout_error"},"SIGNOUT_ERROR"),(0,o.kt)("hr",null),(0,o.kt)("h3",{id:"database"},"Database"),(0,o.kt)("p",null,"These errors are logged by the TypeORM Adapter, which is the default database adapter."),(0,o.kt)("p",null,"They all indicate a problem interacting with the database."),(0,o.kt)("h4",{id:"adapter_connection_error"},"ADAPTER_CONNECTION_ERROR"),(0,o.kt)("h4",{id:"create_user_error"},"CREATE_USER_ERROR"),(0,o.kt)("h4",{id:"get_user_by_id_error"},"GET_USER_BY_ID_ERROR"),(0,o.kt)("h4",{id:"get_user_by_email_error"},"GET_USER_BY_EMAIL_ERROR"),(0,o.kt)("h4",{id:"get_user_by_provider_account_id_error"},"GET_USER_BY_PROVIDER_ACCOUNT_ID_ERROR"),(0,o.kt)("h4",{id:"link_account_error"},"LINK_ACCOUNT_ERROR"),(0,o.kt)("h4",{id:"create_session_error"},"CREATE_SESSION_ERROR"),(0,o.kt)("h4",{id:"get_session_error"},"GET_SESSION_ERROR"),(0,o.kt)("h4",{id:"update_session_error"},"UPDATE_SESSION_ERROR"),(0,o.kt)("h4",{id:"delete_session_error"},"DELETE_SESSION_ERROR"),(0,o.kt)("h4",{id:"create_verification_request_error"},"CREATE_VERIFICATION_REQUEST_ERROR"),(0,o.kt)("h4",{id:"get_verification_request_error"},"GET_VERIFICATION_REQUEST_ERROR"),(0,o.kt)("h4",{id:"delete_verification_request_error"},"DELETE_VERIFICATION_REQUEST_ERROR"),(0,o.kt)("hr",null),(0,o.kt)("h3",{id:"other"},"Other"),(0,o.kt)("h4",{id:"send_verification_email_error"},"SEND_VERIFICATION_EMAIL_ERROR"),(0,o.kt)("p",null,"This error occurs when the Email Authentication Provider is unable to send an email."),(0,o.kt)("p",null,"Check your mail server configuration."),(0,o.kt)("h4",{id:"missing_nextauth_api_route_error"},"MISSING_NEXTAUTH_API_ROUTE_ERROR"),(0,o.kt)("p",null,"This error happens when ",(0,o.kt)("inlineCode",{parentName:"p"},"[...nextauth].js")," file is not found inside ",(0,o.kt)("inlineCode",{parentName:"p"},"pages/api/auth"),"."),(0,o.kt)("p",null,"Make sure the file is there and the filename is written correctly."))}c.isMDXComponent=!0}}]);