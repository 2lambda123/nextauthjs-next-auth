---
title: Credentials authentication
---

NextAuth.js is built in a way that is flexible to integrate it with any authentication back-end you or your company may already have.

This library has been designed to handle the user session client wise, in a flexible way to support multiple authentication methods (OAuth, Email, etc...) in a way that you're not forced to build an authentication back-end.

The Credentials Provider is simple and flexible at the same time. It'll just forward the credentials (username/password) inserted by the user in the login form and let us in charge to validate those against the API or whatever mechanism we're authenticating against.

For this tutorial, we're going to use [NextAuth.js example app](https://github.com/nextauthjs/next-auth-example) as a base.

## 1. Creating an authentication back-end

To keep it simple, we're going to use [`json-server`](https://github.com/typicode/json-server#getting-started) to quickly build an API that will accept requests on `GET /users/{userId}` and will return always a `200` response with the following shape:
```ts
interface UserResponse {
  id: string;
  token: string;
  name: string;
  email: string;
  image: string;
}
```
:::note
Remember, we're doing this to simulate how you would integrate with an existing API with authentication, but it's not needed when using the **CredentialsProvider**!
:::

Let's start by installing `json-server`:

```bash npm2yarn2pnpm
npm install -D json-server
```

and create the following `db.json` file at the root of our project:

```json
{
  "users": [
    {
        "id": "1xdf6",
        "token": "E5PWX4T9dcPriIo...",
        "name": "Steven Seagal",
        "email": "steven@karate.com",
        "image": "https://upload.wikimedia.org/wikipedia/commons/thumb/d/d9/Steven_Seagal_November_2016.jpg/440px-Steven_Seagal_November_2016.jpg"
    } 
  ]
}
```

Now if we run the server:

```bash
$ npx json-server --watch db.json --port 3004
```

and make a request against in a new terminal tab:
```bash
$ curl http://localhost:3004/users/1xdf6
``` 
we should get the following response:
```json
{
  "id": "1xdf6",
  "token": "E5PWX4T9dcPriIo...",
  "name": "Steven Seagal",
  "email": "steven@karate.com",
  "image": "https://upload.wikimedia.org/wikipedia/commons/thumb/d/d9/Steven_Seagal_November_2016.jpg/440px-Steven_Seagal_November_2016.jpg"
}
```

Nice, this is all we need now to simulate a REST API accepting `GET` requests to `/users/{userId}` to let us know whether a user exists or not.

## 2. Credentials Provider set up

Now let's set up the Credentials Provider in our NextAuth.js initialization:

```ts title="pages/api/auth/[...nextauth].ts"
import NextAuth from "next-auth"
import CredentialsProvider from "next-auth/providers/credentials"

export default NextAuth({
  secret: process.env.NEXTAUTH_SECRET,
  providers: [
    CredentialsProvider({
      async authorize(credentials) {
        const authResult = await fetch('/users/login', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            email: credentials.email,
            password:
          })
        })
      },
    }),
  ],
})
```



