import { Callout } from "nextra/components"
import { Code } from "@/components/Code"

# Get Session

Once the user has logged into the system, they will be able to access their registered data through the session objects of different frameworks. This data may include their profile picture, role, or other information stored in the session. These session objects also help determine whether a user is authenticated, allowing us to implement different logic for each case and thus avoid errors or unwanted behavior.

<Code>
<Code.Next>

```tsx filename="./components/UserAvatar" {4} /async/
import { auth } from "../auth"

export default async function UserAvatar() {
  const session = await auth()

  if (!session.user) return null

  return (
    <div>
      <img src={session.user.img} alt="User Avatar" />
    </div>
  )
}
```

</Code.Next>
<Code.NextClient>

In the pages router, to access a session in a component, you'll first need to get the `session` object in a page and then pass it down to the component.

### Page Server Side

```tsx filename="./pages/dashboard.tsx"
import { auth } from "@/auth.ts"
import { UserAvatar } from "@/components/UserAvatar"

export default function Dashboard({ session }) {
  return (
    <nav>
      <UserAvatar session={session} />
    </nav>
  )
}

export async function getServerSideProps(ctx) {
  const session = await auth(ctx)

  return {
    props: {
      session,
    },
  }
}
```

### Page Client Side

When accessing the session client-side using `useSession()`, make sure an Auth.js `<SessionProvider />` is
wrapping your page.

```tsx filename="pages/_app.tsx"
import type { AppProps } from "next/app"
import { SessionProvider } from "next-auth/react"

export default function MyApp({
  Component,
  pageProps: { session, ...pageProps },
}: AppProps) {
  return (
    <SessionProvider session={session}>
      <Component {...pageProps} />;
    </SessionProvider>
  )
}
```

```tsx filename="pages/dashboard.tsx
import { useSession } from "next-auth/react"
import { UserAvatar } from "@/components/UserAvatar"

export default function Dashboard() {
  const session = useSession()

  return (
    <nav>
      <UserAvatar session={session} />
    </nav>
  )
}
```

Finally, we can use it in the component.

```tsx filename="./components/UserAvatar" /session/
export function UserAvatar({ session }) {
  return (
    <div>
      <img
        src={session?.user.img ?? "https://source.boringavatars.com/marble/120"}
        alt="User Avatar"
      />
    </div>
  )
}
```

</Code.NextClient>
<Code.Svelte>

With SvelteKit, you have to return the `session` object from the load function in your `+page.server.ts` or `+layout.server.ts` files.

```ts filename="src/routes/+page.server.ts" {11}
import type { PageServerLoad } from "./$types"

export const load: PageServerLoad = async (events) => {
  const session = await events.locals.auth()

  if (!session?.user?.userId) {
    redirect(303, `/login`)
  }

  return {
    session,
  }
}
```

Then you can access the `session` on the `$page.data` object in your page.

```svelte filename="src/routes/+page.svelte" {7}
<script lang="ts">
  import { page } from "$app/stores"
</script>

<nav>
  <img
    src={$page.data.session?.user?.image ?? 'https://source.boringavatars.com/marble/120/'}
    alt="User Avatar"
  />
</nav>
```

</Code.Svelte>
<Code.Express>

```ts filename="app.ts"
import { getSession } from "@auth/express"

export function authSession(req: Request, res: Response, next: NextFunction) {
  res.locals.session = await getSession(req)
  next()
}

app.use(authSession)

// Now in your route
app.get("/", (req, res) => {
  const { session } = res.locals
  res.render("index", { user: session?.user })
})
```

</Code.Express>
</Code>

If you'd like to extend your session with more fields from your OAuth provider, for example, please check out our ["extending the session" guide](/guides/extending-the-session).
