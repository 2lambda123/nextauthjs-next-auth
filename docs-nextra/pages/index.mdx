import { readdir } from "fs/promises"
import Image from "next/image"
import Marquee from "../components/marquee.jsx"
import Triangle from "../components/triangle.jsx"
import Blob1 from "../assets/img/blobs/blob1.svg"
import Blob2 from "../assets/img/blobs/blob2.svg"
import Blob3 from "../assets/img/blobs/blob3.svg"

export default function Index({ files }) {
  return (
    <div className="flex flex-col justify-center overflow-hidden">
      <div className="flex justify-center items-center flex-col md:flex-row gap-8">
        <Triangle className="mr-4 h-48" />
        <div className="flex flex-col gap-2">
          <h1 className="text-7xl font-bold text-center md:text-left">
            Auth.js
          </h1>
          <p className="text-2xl text-center md:text-left">
            Authentication with for the Web.
          </p>
        </div>
        <div className="btns"></div>
      </div>
      <Image
        src={Blob1}
        className="absolute top-0 left-0 -z-10 w-[50vw] lg:w-[40vw]"
        alt="Blob1"
      />
      <Image
        src={Blob2}
        className="absolute top-0 right-0 -z-10 w-[60vw] lg:w-[40vw]"
        alt="Blob1"
      />
      <Image
        src={Blob3}
        className="absolute bottom-32 lg:bottom-10 right-20 -z-10 w-[80vw] lg:w-full"
        alt="Blob1"
      />
      <Marquee className="absolute top-0 left-0 w-full h-full" files={files} />
    </div>
  )
}

export async function getStaticProps() {
  const dir = process.cwd()
  const files = await readdir(`${dir}/public/img/providers/`)
  return { props: { files: files.filter(e => e.includes('dark')) } }
}
